# item 12 toString을 항상 재정의하라

---

#### Object toString의 기본 메서드 형태
- 클래스_이름@16진수로_표시한_해시코드
- 일반규약에 따르면 '간결하면서 사람이 읽기 쉬운 형태의 유익한 정보'를 반환해야 한다.
    - PhoneNumber@abcd 와 형태보다 010-1111-1111 과 같은 형태가 더 쉬운 형태의 유익한 정보다.
- '모든 하위 클래스에서 이 메서드를 재정의하라' 고 조언

---

#### toString을 잘 구현한 클래스의 유용성
- toString을 잘 구현한 클래스는 사용하기에 훨씬 즐겁고 디버깅하기 쉬워진다.

#### toString 메서드 이용되고 있는 곳
- println, printf, 문자열 연결 연산자(+), assert 구문에 넘길 때, 디버거가 객체를 출력할 때 자동으로 불린다.
- 오류메시지를 로깅할 때 자동으로 호출 가능

---

#### toString 에 관하여
- 제대로하지 재정의하지 않는다면 쓸모없는 메시지만 로그에 남을 것
- 좋은 toString은 이 인스턴스를 포함하는 객체에서 유용하게 쓰일 것
- 실전에서 toString은 그 객체가 가진 주요 정보 모두를 반환하는 것이 좋음
  - 객체가 거대하거나 객체의 상태가 문자열로 표현하기에 적합하지 않다면 무리가 있다.
    - 그런 경우 요약 정보를 담아야 한다. (이상적인 문자열은 아니게 되지만)
- 테스트 실패 메시지는 toString에 주요 정보가 담기지 않았을 때 문제가 되는 대표적인 예
```
Assertion failure: expected {abc, 123} but was {abc, 123}.
```

---

#### toString 구현 시 고려사항
- 반환값의 포맷을 문서화할지 정해야 한다.
  - 값 클래스의 경우 문서화하기를 권한다. (전화번호 or 행렬값)
- 포맷을 명시하면 해당 객체는 표준적이고 명확하고 사람이 읽을 수 있게 됨 (가독성 증가)
- 포맷을 명시하기로 했다면 명시한 포맷과 맞는 문자열과 객체를 상호 전환할 수 있는 정적 팩터리나 생성자를 함께 제공해주면 좋음

---

#### toString 단점
- 포맷을 한번 명시하면 평생 그 포맷에 얽매이게 됨
  - 사용하는 프로그래머들이 해당 포맷에 맞춰 파싱하고 객체를 생성하고 영속 데이터로 저장하는 코드를 작성할 것
  - 향후 릴리스에서 포맷을 바꾼다면 해당 객체를 사용하던 코드들과 데이터들은 엉망이 될 것

---

#### 포맷 명시
- 포맷을 명시하든 아니든 의도를 명확히 밝혀야 한다. 명시하려면 아주 정확하게 해야한다.

명시적 경우
```
/**
* 이 전화번호 문자열 표현을 반환
* 문자열은 "XXX-YYY-ZZZZ" 형태의 12글자로 구성
* XXX는 지역코드, YYY는 프리픽스, ZZZZ는 가입자 번호
* 각 대문자는 10진수 숫자 하나
* 
* 전화번호의 각 부분의 값이 작아서 자릿수를 채울 수 없다면
* 앞에서부터 0으로 채워나간다. 가입자 번호가 123이라면 0123
*/
@Override
public String toString() {
  return String.format("%03d-%03d-%04d", areaCode, prefix, lineNum);
}
```

비명시적 경우
```
/**
* 이 약물에 대한 설명을 반환한다.
* 다음은 이 설명의 일반적인 형태이나
* 상세 형식은 정해지지 않았으며 향후 변경될 수 있다.
* 
* "[약물 #1: 유형=A, 냄새=테레빈유, 겉모습=먹물]"
*/
@Override
public String toString() {
  return String.format("[약물 #%d: 유형=%s, 냄새=%s, 겉모습=%s]", areaCode, prefix, lineNum);
}
```

- toString 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하자
  - 접근자를 제공하지 않으면 (변경될 수 있다고 문서화했더라도) 필요한 접근자와 다른 접근자가 사실상 준-표준 API와 다름없어짐

- 정적 유틸리티 클래스(필요가 없음)나 enum은 toString(이미 완벽한 toString 제공)을 제공할 필요가 없다.

- 하위 클래스들이 공유해야할 문자열 표현이 있는 추상 클래스라면 toString을 재정의 해 줘야 함

- 객체에 대해 아무것도 알려주지 않는 Object의 toString보다는 자동 생성된 toString이 훨씬 유용하다.

---

#### 요약
- 모든 구체 클래스에서 Object의 toString을 재정의하자.
  - 상위 클래스에서 알맞게 재정의한 경우는 예외
- toString은 해당 객체에 관한 명확하고 유용한 정보를 읽기 좋은 형태로 반환해야 한다.
